<main class="container">
    <section class="container-list">
        <div class="header"></div>
        <div class="content">
            <ul class="list">
                <app-list-item
                    *ngFor="let list of lists"
                    [list]="list"
                    [selected]="SelectedList.id"
                    (remove)="removeList($event)"
                    (select)="selectList($event)"
                />
            </ul>
            <ul class="list empty" *ngIf="lists.length <= 0">
                <span class="text">Create your first list...</span>
            </ul>
            <button class="add" (click)="addList()">+ Add Todo List</button>
        </div>
    </section>
    <section class="Container-TaskList">
        <div class="header">
            <app-input-task (addTask)="addNewTask($event)" />
        </div>
        <div class="content">
            <ul class="list">
                <ng-container *ngFor="let task of SelectedList.Tasks">
                    <app-task-item [task]="task" (checkTask)="checkTask($event)" (deleteTask)="deleteTask($event)" />
                </ng-container>
                <li *ngIf="SelectedList.Tasks.length <= 0">No tasks added yet...</li>
            </ul>
            <div class="sort-wrapper">
                <select class="sort" (change)="sortTasks($event)">
                    <ng-container *ngFor="let option of sortOptions">
                        <option [value]="option.value" [selected]="SelectedList.sort.by == option.value">
                            {{ option.label }}
                        </option>
                    </ng-container>
                </select>
                <div (click)="toggleSortOrder()" class="order">
                    <span class="indicator" [class.desc]="!SelectedList.sort.asc"></span>
                    <span class="indicator" [class.asc]="SelectedList.sort.asc"></span>
                </div>
            </div>
        </div>
        <div class="footer"></div>
    </section>
    <section class="container-calendar">
        <div class="header">
            <app-kpi [KPI]="SelectedList.KPI.today" title="Today" />
            <app-kpi [KPI]="SelectedList.KPI.week" title="This Week" />
            <app-kpi [KPI]="SelectedList.KPI.month" title="This Month" />
        </div>
        <div class="content">
            <app-calendar [CalendarEvents]="SelectedList.Tasks" />
        </div>
        <div class="footer">
            <span>
                {{ selectedDate.getDate() }} de
                {{ selectedDate.toLocaleString('default', { month: 'long' }) }}
            </span>
            <ul class="list">
                <ng-container *ngFor="let task of SelectedList.Tasks">
                    <app-task-item
                        [task]="task"
                        class="task-item"
                        (checkTask)="checkTask($event)"
                        (deleteTask)="deleteTask($event)"
                        *ngIf="isSelected(task.dateStart)"
                    />
                </ng-container>
                <li *ngIf="SelectedList.Tasks.length <= 0">No task for this day...</li>
            </ul>
        </div>
    </section>
</main>
